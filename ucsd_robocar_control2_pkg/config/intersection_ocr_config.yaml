intersection_ocr_node:
  ros__parameters:
    # Use AckermannDriveStamped (true) or Twist/cmd_vel (false)
    use_ackermann: false
    
    # Blue tape detection parameters (HSV color space)
    blue_tape_detection_enabled: true
    blue_hue_low: 100        # HSV lower bound for blue color (Hue: 0-179)
    blue_hue_high: 130       # HSV upper bound for blue color
    blue_saturation_low: 70  # Saturation lower bound (0-255) - moderate to exclude light blue but allow tape
    blue_saturation_high: 255
    blue_value_low: 50       # Value (brightness) lower bound (0-255)
    blue_value_high: 255
    blue_detection_threshold: 0.050  # minimum fraction of image that must be blue (0.0-1.0) - balanced at 8%
    blue_detection_debounce_count: 3  # number of consecutive detections needed to confirm - balanced at 6
    
    # Intersection behavior
    stop_duration: 1.0  # seconds to wait after stopping before OCR processing
    
    # OCR processing
    ocr_confidence_threshold: 0.5
    # Note: OCR timeout removed - will wait indefinitely for OCR result
    
    # Turn parameters
    turn_angle_left: -1.0   # steering angle for left turn (negative for left, positive for right in Twist/cmd_vel)
    turn_angle_right: 1.0  # steering angle for right turn
    turn_duration: 1.0  # seconds to execute turn
    turn_speed: 0.15  # speed during turn
    
    # Improved turning with lane detection
    turn_lane_detection_enabled: true  # Use lane detection to verify turn completion
    turn_lane_detection_timeout: 5.0  # Max time to wait for lane detection during turn
    turn_lane_error_threshold: 0.15  # Centroid error threshold to consider lane found
    turn_blend_ratio: 0.6  # Ratio of turn_duration for fixed angle phase (0.6 = 60% fixed, 40% transition)
    
    # Lane following parameters
    lane_following_speed: 0.2  # normal lane following speed
    
    # Stop command parameters
    stop_command_duration: 2.0  # seconds to wait before shutdown after stop command is received
    
    # VESC connection checking
    vesc_check_enabled: true  # Enable VESC connection monitoring
    vesc_device_path: "/dev/ttyACM0"  # VESC device file path
    vesc_check_interval: 2.0  # seconds between VESC connection checks
    vesc_node_name: "vesc_twist_node"  # Name of VESC node to check

